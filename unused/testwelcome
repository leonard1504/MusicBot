const { SlashCommandBuilder } = require('@discordjs/builders');
const { MessageAttachment, MessageEmbed } = require('discord.js');
const { color } = require('../config.json');
const Canvas = require('canvas');
module.exports = {
	data: new SlashCommandBuilder()
		.setName('testwelcome')
		.setDescription('Test Command für Willkommensnachricht'),
	async execute(interaction) {
        let name = interaction.user.tag;
        const canvas = Canvas.createCanvas(2430, 1056);
        const context = canvas.getContext('2d');
        const welcomefg = await Canvas.loadImage('C:/DiscordBot/MusicBot/serverjoin.png');
        const avatar = await Canvas.loadImage(interaction.user.avatarURL({ format: "jpg"}));
        context.drawImage(avatar, 1310, 180, 600, 600);
        context.drawImage(welcomefg, 0, 0, canvas.width, canvas.height);
        const attachment = new MessageAttachment(canvas.toBuffer(), 'profile-image.png');
        const embedwelcome = new MessageEmbed()
            .setColor(`${color}`)
            .setTitle(`Heißt ${name} auf \n${interaction.guild.name} willkommen`)
            .setImage('attachment://profile-image.png')
            .setFooter(`Der Server hat nun ${interaction.guild.memberCount} Mitglieder`);
		await interaction.reply({ embeds: [embedwelcome], files: [attachment] });
    },
};